# React 컴포넌트와 통합하는 예시

## 예시 1: 대시보드에서 **만다라트 생성 버튼 + 리스트 출력**

```tsx
tsx
복사편집
// components/mandalart/DashboardScreen.tsx
import { useEffect, useState } from 'react'
import { useRouter } from 'next/router'
import { supabase } from '@/lib/supabaseClient'
import { createNewMandalart, fetchUserMandalarts } from '@/services/mandalart'
import { Button } from '@/components/ui/Button'
import { MandalartCard } from '@/components/mandalart/MandalartCard'

export const DashboardScreen = ({ user }: { user: any }) => {
  const [mandalarts, setMandalarts] = useState([])
  const [loading, setLoading] = useState(true)
  const router = useRouter()

  // 만다라트 리스트 로딩
  useEffect(() => {
    const load = async () => {
      const data = await fetchUserMandalarts(user.id)
      setMandalarts(data)
      setLoading(false)
    }
    load()
  }, [user.id])

  // 생성 버튼 클릭
  const handleCreate = async () => {
    const id = await createNewMandalart('새 만다라트', user.id)
    router.push(`/mandalart/${id}`)
  }

  return (
    <div className="p-4">
      <h1 className="text-xl font-bold mb-4">내 만다라트</h1>

      <Button label="새 만다라트 만들기" onClick={handleCreate} />

      <div className="mt-4 space-y-3">
        {loading ? (
          <p>불러오는 중...</p>
        ) : (
          mandalarts.map((m: any) => (
            <MandalartCardkey={m.id}
              id={m.id}
              title={m.title}
              createdAt={m.created_at}
              updatedAt={m.updated_at}
              onClick={(id) => router.push(`/mandalart/${id}`)}
            />
          ))
        )}
      </div>
    </div>
  )
}

```

---

## ✅ 예시 2: 셀 클릭 시 **슬라이드업 → 편집 후 저장**

```tsx
tsx
복사편집
// components/mandalart/MandalartEditorScreen.tsx
import { useState, useEffect } from 'react'
import { fetchMandalartCells, updateCell } from '@/services/mandalart'
import { MandalartCell } from './MandalartCell'
import { CellEditorForm } from './CellEditorForm'
import { SlideUpPanel } from '@/components/ui/SlideUpPanel'

export const MandalartEditorScreen = ({ mandalartId }: { mandalartId: string }) => {
  const [cells, setCells] = useState([])
  const [selectedCell, setSelectedCell] = useState<any>(null)

  useEffect(() => {
    const load = async () => {
      const data = await fetchMandalartCells(mandalartId)
      setCells(data)
    }
    load()
  }, [mandalartId])

  const handleCellSave = async (updatedData: Partial<any>) => {
    await updateCell(selectedCell.id, updatedData)
    setSelectedCell(null) // 슬라이드 닫기

    // 다시 데이터 불러오기 or 낙관적 업데이트
    setCells((prev) =>
      prev.map((c) => (c.id === selectedCell.id ? { ...c, ...updatedData } : c))
    )
  }

  return (
    <div className="p-2">
      <div className="grid grid-cols-9 gap-[2px]">
        {cells.map((cell) => (
          <MandalartCellkey={cell.id}
            {...cell}
            onClick={() => setSelectedCell(cell)}
          />
        ))}
      </div>

      <SlideUpPanel isOpen={!!selectedCell} onClose={() => setSelectedCell(null)} title="칸 편집">
        {selectedCell && (
          <CellEditorForminitialData={selectedCell}
            onSave={handleCellSave}
            onCancel={() => setSelectedCell(null)}
          />
        )}
      </SlideUpPanel>
    </div>
  )
}

```

---

## ✨ 사용된 컴포넌트/서비스 요약

| 이름 | 역할 |
| --- | --- |
| `fetchUserMandalarts` | 유저의 만다라트 리스트 조회 |
| `createNewMandalart` | RPC로 1건 생성 + 81칸 초기화 |
| `fetchMandalartCells` | 9x9 셀 데이터 조회 |
| `updateCell` | 개별 셀 데이터 저장 |
| `MandalartCard` | 대시보드 카드 UI |
| `MandalartCell` | 격자형 셀 UI |
| `SlideUpPanel` + `CellEditorForm` | 편집 UI 슬라이드/폼 처리 |